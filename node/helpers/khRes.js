"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_asset=_interopRequireDefault(require("../utils/asset")),ResHelper=/*#__PURE__*/function(){function a(b,c,d){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{name:null,authority:null};(0,_classCallCheck2.default)(this,a),this._chain=b,this._code=c,this._symStr=d,this._admin=e}return(0,_createClass2.default)(a,[{key:"resContract",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(){var b;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this._chain.getContract(this._code);case 2:return b=a.sent,a.abrupt("return",b);case 4:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()/**
     * check res of an user
     * @param userAccount - account of the user
     * @return {Promise<Asset>} - returns null if it's not exist.
     */},{key:"checkBalance",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(b){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=_asset.default,a.next=3,this._chain.checkTableItem(this._code,"res.accounts",b,this._symStr);case 3:return a.t1=a.sent,a.abrupt("return",a.t0.parse.call(a.t0,a.t1));case 5:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()/**
     * check res's info
     * @return {Promise<Asset>} - returns null if it's not exist.
     */},{key:"checkInfo",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=_asset.default,a.next=3,this._chain.checkTableItem(this._code,"res.info",this._code,this._symStr);case 3:return a.t1=a.sent,a.abrupt("return",a.t0.parse.call(a.t0,a.t1));case 5:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"issue",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(b,c,d){var e;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.resContract();case 2:return e=a.sent,a.next=5,e.resissue({user:b,quantity:c,memo:d});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"burn",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(b,c,d){var e;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.resContract();case 2:return e=a.sent,a.next=5,e.resburn({user:b,quantity:c,memo:d});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"take",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(b,c,d,e){var f;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.resContract();case 2:return f=a.sent,a.next=5,f.restake({from:b,to:c,quantity:d,memo:e});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"change",value:function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(b,c,d,e){var f;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.resContract();case 2:return f=a.sent,a.next=5,f.change({user:b,from:c,to:d,memo:e});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"admin",get:function a(){return this._admin&&this._admin.name&&this._admin.authority?this._admin:null}}]),a}();exports.default=ResHelper;